
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="This document describes how to use AppControl to execute a script or program as
a task in XC Scenario. It shows how to define the script invocation in an
AppControl map, how to test it directly from AppControl, and finally how to use
it from Scenario." name="description"/>
<link href="https://xcomponent.github.io/appcontrol-documentation/Getting%20Started/appcontrol_worker/" rel="canonical"/>
<link href="../../favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.0, mkdocs-material-9.5.28" name="generator"/>
<title>Contents - XComponent AppControl</title>
<link href="../../assets/stylesheets/main.6543a935.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<meta content="Contents" name="title"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"/><meta content="website" property="og:type"/><meta content="https://xcomponent.github.io/appcontrol-documentation/Getting%20Started/appcontrol_worker" property="og:url"/><meta content="Contents" property="og:title"/><meta content="This document describes how to use AppControl to execute a script or program as
a task in XC Scenario. It shows how to define the script invocation in an
AppControl map, how to test it directly from AppControl, and finally how to use
it from Scenario." property="og:description"/><meta content="customs.png" property="og:image"/><meta content="summary_large_image" property="twitter:card"/><meta content="https://xcomponent.github.io/appcontrol-documentation/Getting%20Started/appcontrol_worker" property="twitter:url"/><meta content="Contents" property="twitter:title"/><meta content="This document describes how to use AppControl to execute a script or program as
a task in XC Scenario. It shows how to define the script invocation in an
AppControl map, how to test it directly from AppControl, and finally how to use
it from Scenario." property="twitter:description"/><meta content="customs.png" property="twitter:image"/></head>
<body data-md-color-accent="#532699" data-md-color-primary="green" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#contents">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="XComponent AppControl" class="md-header__button md-logo" data-md-component="logo" href="../.." title="XComponent AppControl">
<img alt="logo" src="../../logo2.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            XComponent AppControl
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Contents
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/xcomponent/appcontrol-documentation" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub Project
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="XComponent AppControl" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="XComponent AppControl">
<img alt="logo" src="../../logo2.svg"/>
</a>
    XComponent AppControl
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/xcomponent/appcontrol-documentation" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub Project
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../itil/">
<span class="md-ellipsis">
    AppControl and ITIL
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../gettingStarted/">
<span class="md-ellipsis">
    Introduction to AppControl SaaS
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../gettingStarted/#try-demo">
<span class="md-ellipsis">
    Demo setup with no connection to local infrastructure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../gettingStarted/#connecting-to-local-infrastructure">
<span class="md-ellipsis">
    Connecting local infrastructure
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../coreconcepts/">
<span class="md-ellipsis">
    Core Concepts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../mainfeatures/">
<span class="md-ellipsis">
    Main Features
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Create your own application manually
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Create your own application manually
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../map/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../map#yaml-format">
<span class="md-ellipsis">
    YAML Format
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../map#xml-format">
<span class="md-ellipsis">
    XML Format
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../dynamicMapInformations/">
<span class="md-ellipsis">
    Enrich your application with dynamic informations
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Create your own application using wizard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Create your own application using wizard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../map/#auto-generate-application-from-running-processes">
<span class="md-ellipsis">
    Auto-Generate Application from Running Processes
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../map/#auto-generate-application-from-azure-tenant">
<span class="md-ellipsis">
    Auto-Generate Application from Azure Tenant
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Gateways and Agents Installation in Local Infrastructure
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Gateways and Agents Installation in Local Infrastructure
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../x4bcli/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../x4bcli/#quick-deployment-of-agents-and-gateways-windows-and-macos">
<span class="md-ellipsis">
    Quick installation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../x4bcli/#x4b-gateway-custom-installation">
<span class="md-ellipsis">
    Gateway installation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../agents/">
<span class="md-ellipsis">
    Agent installation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../agentsdeployment/">
<span class="md-ellipsis">
    Automatic Deployment of Agents
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../agentazure/">
<span class="md-ellipsis">
    Gateways and Agents Installation in Azure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../repo/">
<span class="md-ellipsis">
    Git integration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contact/">
<span class="md-ellipsis">
    Contact Us
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
<span class="md-ellipsis">
    Advanced
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_12">
<span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../standalone/">
<span class="md-ellipsis">
    Install standalone
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../centreon/">
<span class="md-ellipsis">
    How to import your Centreon setup into AppControl
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cmdb/">
<span class="md-ellipsis">
    How to integrate AppControl with a ServiceNow Cmdb
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#benefits-of-using-appcontrol">
<span class="md-ellipsis">
      Benefits of using AppControl
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="contents">Contents</h1>
<p>This document describes how to use AppControl to execute a script or program as
a task in XC Scenario. It shows how to define the script invocation in an
AppControl map, how to test it directly from AppControl, and finally how to use
it from Scenario.</p>
<h2 id="benefits-of-using-appcontrol">Benefits of using AppControl</h2>
<p>There are many advantages to running scripts through AppControl, as opposed to
running them directly from a worker task:</p>
<ul>
<li>
<p>the use of an AppControl agent for execution makes it easy to run scripts on
  remote machines, without requiring the script author to manage remote
  connections and logins himself</p>
</li>
<li>
<p>executions through AppControl will benefit from monitoring and supervision by
  the production support team</p>
</li>
<li>
<p>defining script calls in an AppControl map allows for better tracking and
  management of the script code base</p>
</li>
</ul>
<h1 id="pre-requisites">Pre-requisites</h1>
<p>This document assumes that you have access to a working X4B installation,
either <a href="https://x4b.xcomponent.com/">Invivoo's SaaS platform</a>, or an X4B
platform deployed on your premises.</p>
<p>This includes XC Scenario, XC AppControl, and an AppControl worker (detailed
below) deployed and configured to interact with this AppControl instance.
Contact the administrator of your X4B platform to make sure that all the
required components are available and properly configured.</p>
<h2 id="appcontrol-worker">AppControl Worker</h2>
<p>The AppControl worker is a standalone program that acts as a worker program for
Scenario:</p>
<ul>
<li>it publishes a catalog of tasks</li>
<li>it polls the task queue for tasks to execute</li>
<li>it runs tasks and posts task statuses</li>
</ul>
<p>Unlike other worker programs that implement their own tasks, the AppControl
worker:</p>
<ul>
<li>gets its list of tasks from custom actions in AppControl maps</li>
<li>runs tasks by calling custom actions that get executed by an AppControl agent</li>
</ul>
<p>The AppControl worker must be configured to communicate with an AppControl
server through a <em>gateway</em>, which is defined inside AppControl, and is
associated with a specific AppControl user.</p>
<h1 id="defining-scripts-for-the-appcontrol-worker">Defining scripts for the AppControl worker</h1>
<p>Scripts that are meant to be used with the AppControl worker need to be defined
inside an AppControl map, as custom actions attached to some AppControl
component.</p>
<h2 id="custom-actions">Custom actions</h2>
<p>A custom action is defined by an <code>action</code> element (inside a <code>component</code>
element) with a <code>name="custom"</code> attribute. Other important attributes are
<code>commandname</code>, which lets you identify each custom action, and <code>value</code>, which
holds the actual command to execute.</p>
<p>The contents of the <code>value</code> attribute are sent to the AppControl agent for
execution, so the platform where the agent is running determines the actual
shell script language to use, Windows command/batch script or linux/unix-like
shell script.</p>
<p>The <code>action</code> element can have <code>parameters</code> and <code>outputParameters</code> sub-elements,
for input and output parameters, respectively.</p>
<p>The <code>action</code> element also has a <code>visibility</code> attribute, which controls whether
the action is accessible from outside AppControl or not. The AppControl worker
only retrieves public tasks, so if a custiom action is to be used with Scenario,
it is mandatory to specify <code>visibility="public"</code>.</p>
<p>See the <a href="../map.md">AppControl map documentation</a> for more details.</p>
<h3 id="example">Example</h3>
<p>The following XML snippet is an excerpt from an AppControl map that defines a
component named <code>"comp"</code> (you can find the map file <a href="map%2Cv1.xml">here</a>). This
component has a <code>check</code> action (mandatory) and two custom actions named <code>calc</code>
and <code>prod_div</code>.</p>
<pre><code class="language-xml">&lt;component name="comp" description="Script execution component" hostref="LOCAL" authref="LOCAL" redirectoutput="false" type="file"&gt;
    &lt;action value="echo 1" name="check" /&gt;

    &lt;action value="C:\a\bin\calc_script.cmd $(arg)" commandname="calc" name="custom" visibility="public"&gt;
        &lt;parameters&gt;
            &lt;parameter name="arg" value="" canedit="true" validation="*" /&gt;
        &lt;/parameters&gt;
    &lt;/action&gt;

    &lt;action value="py c:\a\bin\pycalc.py $(operand1) $(operand2)" commandname="prod_div" name="custom" visibility="public"&gt;
        &lt;parameters&gt;
            &lt;parameter name="operand1" canedit="true" validation="\d+" /&gt;
            &lt;parameter name="operand2" canedit="true" validation="\d+" /&gt;
        &lt;/parameters&gt;
        &lt;outputParameters&gt;
            &lt;parameter name="product" /&gt;
            &lt;parameter name="division" /&gt;
        &lt;/outputParameters&gt;
    &lt;/action&gt;

&lt;/component&gt;
</code></pre>
<p>The <code>calc</code> action has a single input parameter named <code>arg</code>, defined in the
<code>parameters/parameter</code> element, and referenced with the <code>$(arg)</code> inside the
<code>value</code> attribute. This action will run the Windows command line file found at
<strong><code>C:\a\bin\calc_script.cmd</code></strong> on the agent's machine, passing it the value of
the <code>arg</code> parameter (script file <a href="calc_script.cmd">here</a>).</p>
<p>The <code>prod_div</code> action has both input and output parameters. It runs a python
script with two input parameters, calculating the product and division of these
two operands, and returning those two values. The <code>outputParameters</code> element is
used to list the names of the return values, so they can be added to the task's
description in the Scenario task catalog, and also identified in the script's
output stream
(see <a href="#A-script-with-output-parameters">A script with output parameters</a>
below).</p>
<h2 id="running-custom-actions-in-appcontrol">Running custom actions in AppControl</h2>
<p>Once the custom actions have been defined in the map file, as above, the map
must be imported into AppControl, using the <strong>New</strong> button in the UI. Please
refer to
the
<a href="https://xcomponent.github.io/appcontrol-documentation/">AppControl documentation</a> if
you need more information on how to use the AppControl UI.</p>
<p>When the <code>Architecture</code> tab is chosen to display the map's graph, the
components from the map are shown, and any custom actions defined on them will
be found on a dropdown menu accessible through a right-click:</p>
<p><img alt="customs" src="customs.png"/></p>
<h3 id="a-simple-script">A simple script</h3>
<p>If we pick the <code>calc</code> action, a dialog box (on the left) shows the command line
that will be executed, as well as the arguments that are expected (in this
case, the single parameter <code>arg</code>). Enter a value for the argument, and press
the <strong>Execute Custom Action</strong> button. The dialog box (on the right) now
displays the status of the execution, which can be <strong>InProgess</strong>, while it's
running, and then <strong>Execution Succeeded</strong> as shown here when it's finished,
with the exit code from the script on the right-hand side.</p>
<p><img alt="calc" src="calc_script.png"/></p>
<p>As scripts usually produce output from their execution by printing to their
standard output stream, the AppControl custom action captures that output
stream and displays it on the screen, below the green status line. In this
case, it's the message <code>calc_script: arg=hello</code> that was printed by the script.</p>
<h3 id="a-script-with-output-parameters">A script with output parameters</h3>
<p>A shell script does not have a notion of output parameters. But in many
situations, people write code that produces results, and we want to retrieve
those results, either for displaying in the AppControl UI, or for communicating
them to Scenario so they can be used by other tasks. </p>
<p>This second example, the <code>prod_div</code> action, illustrates this use case with a
python script that returns two output parameters, and it explains the
particular syntax that's used, in the script's standard output stream, to
represent return values so Scenario get use them.</p>
<p>The <code>pycalc</code> script (source code <a href="pycalc.py">here</a>) calls a python function
that calculates the product and division of its two operands. If we pick the
<code>prod_div</code> action in AppControl, the dialog box will shows us the command line
and input arguments (<code>operand1</code>, <code>operand2</code>), and after executing the action,
we'll also see the standard output, as before.</p>
<p><img alt="prod_div" src="prod_div.png"/></p>
<p>However, in this case, we see that the standard output has a very specific
format:</p>
<pre><code class="language-xml">&lt;appcontrol&gt;
    {
        'Message': 'pycalc: success.',
        'OutputValues': {
            'product': 72,
            'division': 8.0,
         }
    }
&lt;/appcontrol&gt;
</code></pre>
<p>Inside the <strong>&lt;appcontrol&gt;</strong> tags is an object with json/javascript syntax,
that is meant to be interpreted by the AppControl worker:</p>
<ul>
<li>
<p>the <code>Message</code> property holds some text that will be displayed in the Scenario
  UI, so it should be some kind of summary or resulting status from the
  script's execution.</p>
</li>
<li>
<p>the <code>OutputValues</code> property is a dictionary of the output parameters. It must
  match the set of parameters listed in the <code>outputParameters</code> element of the
  AppControl map (see <a href="#Example">Custom action example</a> above), and the values
  must be filled in by the script.</p>
</li>
</ul>
<h2 id="running-scriptscustom-actions-in-scenario">Running scripts/custom actions in Scenario</h2>
<p>So far, we've seen how to define our scripts in the AppControl map, and how to
run them from the AppControl UI. This section deals with using those scripts
inside Scenario.</p>
<p>If everything has been set up correctly by your administrator, as described
in <a href="#Pre-requisites">Pre-requisites</a> above, importing and loading (activating)
the map that defines your scripts is enough to make them available in
Scenario. The AppControl worker publishes all the custom actions from your map
as Scenario tasks, in a namespace called <strong>AppControl</strong>.</p>
<h1 id="using-the-script-as-a-scenario-task">Using the script as a Scenario task</h1>
<p>In the Scenario designer, when creating or modifying a scenario definition,
drag and drop an automatic task object (the one with the gears icon, called
<strong>Task</strong>), and select the <strong>AppControl</strong> namespace in the Task Parameters
panel. In the list of tasks, you can see two tasks from the <strong><code>map,v1.xml</code></strong>
file, with names:</p>
<ul>
<li>map,v1@admin__comp_calc</li>
<li>map,v1@admin__comp_prod_div</li>
</ul>
<p>The structure of these names reflects the AppControl artifacts:
&lt;map&gt;@&lt;user&gt;__&lt;component&gt;_&lt;action&gt;. These actions are now
available, like any other task, to be used in your scenario.</p>
<p><img alt="catalog" src="catalog.png"/></p>
<p>Select the <code>prod_div</code> task, enter values for operands 1 and 2, and then run the
scenario. In the cockpit, you can see the output values and the message, just
as we saw in the AppControl UI above:</p>
<p><img alt="execution" src="execution.png"/></p>
<div class="share-buttons">
<button class="share-button hover-item" onclick="window.open('https://twitter.com/intent/tweet?url=https://xcomponent.github.io/appcontrol-documentation/Getting%20Started/appcontrol_worker', 'TwitterShare', 'width=550,height=680,menubar=no,toolbar=no'); return false;">
<i class="fa-brands fa-x-twitter"></i> Tweet
    </button>
<button class="share-button hover-item linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?url=https://xcomponent.github.io/appcontrol-documentation/Getting%20Started/appcontrol_worker', 'LinkedinShare', 'width=550,height=730,menubar=no,toolbar=no'); return false;">
<i class="fa-brands fa-linkedin-in"></i> Share
    </button>
</div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      © 2024 XComponent AppControl. All rights reserved.
    </div>
</div>
<div class="md-social">
<a class="md-social__link" href="https://slack.xcomponent.com" rel="noopener" target="_blank" title="slack.xcomponent.com">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"></path></svg>
</a>
<a class="md-social__link" href="https://ask.invivoo.com/appcontrol" rel="noopener" target="_blank" title="ask.invivoo.com">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M528.3 46.5H388.5c-48.1 0-89.9 33.3-100.4 80.3-10.6-47-52.3-80.3-100.4-80.3H48c-26.5 0-48 21.5-48 48v245.8c0 26.5 21.5 48 48 48h89.7c102.2 0 132.7 24.4 147.3 75 .7 2.8 5.2 2.8 6 0 14.7-50.6 45.2-75 147.3-75H528c26.5 0 48-21.5 48-48V94.6c0-26.4-21.3-47.9-47.7-48.1zM242 311.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5V289c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5V251zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H78.2c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm259.3 121.7c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5v-22.9c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5V228c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5v22.9zm0-60.9c0 1.9-1.5 3.5-3.5 3.5H337.5c-1.9 0-3.5-1.5-3.5-3.5v-22.8c0-1.9 1.5-3.5 3.5-3.5h160.4c1.9 0 3.5 1.5 3.5 3.5V190z"></path></svg>
</a>
<a class="md-social__link" href="mailto:support@appcontrol.com" rel="noopener" target="_blank" title="">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "tabs", "navigation.expand"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
</body>
</html>